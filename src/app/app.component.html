<div class="container">
    <div 
        class="row mt-3"
        *ngIf="wasErrorLoadingQuizzes"
    >
        <div class="col-md-12">
            <h3>: - (</h3>
            <p>Can't load quizzes, please try again later...</p>
        </div>
    </div>
    <div 
        class="row mt-3"
        *ngIf="!wasErrorLoadingQuizzes"
    >
        <div class="col-md-4">
            <button 
                class="btn btn-outline-success mb-3"
                (click)="addNewQuiz()"
            >
                Add New Quiz
            </button>
            <button 
                class="btn btn-link btn-sm"
                (click)="jsPromisesOne()"
            >
                JS Promises 1
            </button>
            <button 
                class="btn btn-link btn-sm"
                (click)="jsPromisesTwo()"
            >
                2
            </button>
            <button 
                class="btn btn-link btn-sm"
                (click)="jsPromisesThree()"
            >
                3
            </button>
            <div class="list-group mb-3">
                <button 
                    class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
                    *ngFor="let q of quizzes"
                    (click)="selectQuiz(q)"
                    [class.active]="q == selectedQuiz"
                    [style.text-decoration]="q.markedForDelete ? 'line-through' : 'inherit'"
                >
                    {{ q.name }}
                    <small class="font-italic font-weight-lighter">
                        ({{ q.questions.length }} question<span *ngIf="q.questions.length != 1">s</span>)
                    </small> 
                </button>
            </div>
        </div>
        <div 
            class="col-md-8"
            *ngIf="selectedQuiz == undefined"
        >
            <div class="card bg-light">
                <div class="card-body text-center">
                    <h5>No Quiz Selected</h5>
                    Please select or add a new quiz to get started...
                </div>
            </div>
        </div>
        <div 
            class="col-md-8"
            *ngIf="selectedQuiz != undefined"
        >
            <button class="btn btn-outline-dark mb-3">
                Save Quizzes
            </button>
            <button class="btn btn-link mb-3">
                Cancel
            </button>
            <div class="card mb-3">
                <div class="card-header">
                    General
                </div>
                <div class="card-body form-group">
                    <input
                        [(ngModel)]="selectedQuiz.name"
                        class="form-control"
                    />
                </div>
            </div>
            <div class="card mb-3">
                <div class="card-header">
                    Questions
                </div>
                <div class="card-body">
                    <button 
                        class="btn btn-outline-success"
                        (click)="addNewQuestion();"
                    >
                        Add New Question
                    </button>
                    <div 
                        class="form-group"
                        *ngIf="selectedQuiz.questions.length > 0"
                    >
                        <div 
                            class="row mt-3"
                            *ngFor="let question of selectedQuiz.questions"
                        >
                            <div class="col-md-10">
                                <input
                                [(ngModel)]="question.name"
                                class="form-control"
                                />
                            </div>
                            <div class="col-md-2">
                                <button 
                                    class="btn btn-link text-danger"
                                    (click)="removeQuestion(question)"
                                >
                                    Remove
                                </button>
                            </div>
                        </div>
                    </div>                    
                    <p
                        *ngIf="selectedQuiz.questions.length == 0"
                        class="mt-3"
                    >
                        No questions : - (
                </p>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    Other
                </div>
                <div class="card-body">
                    <div class="form-check mb-3">
                        <input 
                            id="markForDeleteInput" 
                            type="checkbox" 
                            class="form-check-input"
                            [(ngModel)]="selectedQuiz.markedForDelete"
                        />
                        <label 
                            for="markForDeleteInput" 
                            class="form-check-label"
                            [class.text-danger]="selectedQuiz.markedForDelete"
                        >
                            Mark for Delete
                        </label>
                    </div>
                    <div ngbDropdown placement="top-right" class="d-inline-block">
                        <button class="btn btn-outline-primary" id="dropdownBasic2" ngbDropdownToggle>Toughest Question</button>
                        <div ngbDropdownMenu aria-labelledby="dropdownBasic2">
                            <button 
                                ngbDropdownItem
                                *ngFor="let question of selectedQuiz.questions"
                                (click)="toughestQuestion = question.name"
                            >
                                {{ question.name }}
                            </button>
                        </div>
                    </div>
                    &nbsp;
                    {{ toughestQuestion }}
                </div>
            </div>
        </div>
    </div>
</div>